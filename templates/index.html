<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>智能家居数字大屏系统</title>
        <script type="text/javascript" src="https://assets.pyecharts.org/assets/echarts.min.js"></script>
        <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script>
        <script type="text/javascript" src="https://assets.pyecharts.org/assets/echarts-liquidfill.min.js"></script>
        <script type="text/javascript" src="https://assets.pyecharts.org/assets/echarts-wordcloud.min.js"></script>
        <style>
            h1{font-family:"楷书";color:#9AB3F5;font-size:50px;line-height:80px;}
            div{box-shadow:0 10px 20px rgba(191, 216, 184,0.19), 0 6px 6px rgba(191, 216, 184,0.23);border-radius:5px;background:#E8F6EF;position:relative; }
            #tem{width:400px; height:400px;margin-left:40px; margin-top:20px;float: left;}
            #hum{width:400px; height:400px;margin-left:40px; margin-top:20px;float: left;}
            #altitude{width:500px; height:400px;margin-left:40px; margin-top:20px;float: left;}
            #line{width:800px; height:400px;margin-top:20px;margin-left:50px;float: left;}
            #wordcloud{width:500px; height:400px;margin-left:40px;margin-top:20px;float: left;}
            .ttop{width:100%;height:90px;text-align:center; margin-top:-20px;background:#6F69AC;}
        </style>
    </head>
    <body>
        <div class="ttop">
            <h1>基于Pyecharts + Flask + MQTT 智能家居数字大屏系统</h1>
        </div>
        <div id="tem"></div>
        <div id="hum"></div>
        <div id="altitude"></div>
        <div id="line"></div>
        <div id="wordcloud"></div>

        <form id="form">
            <table>
            <tr>
                <td>红色:</td>
                <td>
                    <label class="switch">
                        <input type="checkbox"  value="0" name="led">
                        <div class="slider round"></div>
                    </label>
                </td>
            </tr>
            <tr>
                <td>绿色:</td>
                <td>
                    <label class="switch">
                        <input type="checkbox"  value="1" name="led">
                        <div class="slider round"></div>
                    </label>
                </td>
            </tr>
            <tr>
                <td>蓝色:</td>
                <td>
                    <label class="switch">
                        <input type="checkbox"  value="2" name="led">
                        <div class="slider round"></div>
                    </label>
                </td>
            </tr>
                <tr>
                <td>风扇:</td>
                <td>
                    <label class="switch">
                        <input type="checkbox"  value="0" name="fan">
                        <div class="slider round"></div>
                    </label>
                </td>
            </tr>
            </table>
        </form>
    </body>
    <script>
            var tem = echarts.init(document.getElementById('tem'), 'white', {renderer: 'canvas'});
            $(
                function () {
                    update_tem(tem);
                    setInterval(update_tem, 30000);
                }
            );

            function update_tem() {
            $.ajax({
                type: "GET",
                url: "http://192.168.1.100:5000/tem",
                dataType: 'json',
                success: function (result) {
                    tem.setOption(result);
                }
            });
        }
    </script>

    <script>
            var hum = echarts.init(document.getElementById('hum'), 'white', {renderer: 'canvas'});
            $(
                function () {
                    update_hum(hum);
                    setInterval(update_hum, 30000);
                }
            );

            function update_hum() {
                $.ajax({
                    type: "GET",
                    url: "http://192.168.1.100:5000/hum",
                    dataType:'json',
                    success: function (result) {
                        hum.setOption(result);
                    },
                
                });
            }
    </script>


    <script>
            var altitude = echarts.init(document.getElementById('altitude'), 'white', {renderer: 'canvas'});

            $(
                function () {
                    fetchaltitudeData(altitude);
                    setInterval(fetchaltitudeData, 20000);
                }
            );

            function fetchaltitudeData() {
                $.ajax({
                    type: "GET",
                    url: "http://192.168.1.100:5000/light",
                    dataType:'json',
                    success: function (result) {
                        altitude.setOption(result);
                    },
                
                });
            }
    </script>


    <script>
            var line = echarts.init(document.getElementById('line'), 'white', {renderer: 'canvas'});
            $(
                function () {
                    fetchlineData(line);
                    setInterval(getDynamicData, 200000);
                }
            );

            function fetchlineData() {
                $.ajax({
                    type: "GET",
                    url: "http://192.168.1.100:5000/line",
                    dataType: "json",
                    success: function (result) {
                        line.setOption(result);
                    }
                });
            }


    </script>

    <script>
            var wordcloud = echarts.init(document.getElementById('wordcloud'), 'white', {renderer: 'canvas'});

            $(
                function () {
                    fetchwordcloudData(wordcloud);
                    setInterval(fetchwordcloudData, 2000);
                }
            );

            function fetchwordcloudData() {
                $.ajax({
                    type: "GET",
                    url: "http://127.0.0.1:5000/wordcloudChart",
                    dataType:'json',
                    success: function (result) {
                        wordcloud.setOption(result);
                    },
                
                });
            }
    </script>

</html>